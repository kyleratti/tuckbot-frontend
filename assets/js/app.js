!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.showElements=n.hideElements=n.setElementVisibility=n.setAttributes=void 0,n.setAttributes=function(e,t){const n=document.getElementById(e);if(n){for(const e in t){let o=t[e];void 0!==o&&"string"==typeof o||(o=n.dataset[e]||""),"content"===e?n.textContent=""+o:n.setAttribute(e,""+o)}return n}};n.setElementVisibility=(e,t)=>e.classList.toggle("hidden",!t);const o=e=>{const t=[];var n;return(n=e)instanceof Array&&(n.forEach((function(e){if("string"!=typeof e)return!1})),1)&&e.map((e=>{const n=document.getElementById(e);n&&t.push(n)})),t};n.hideElements=e=>{o(e).map((e=>n.setElementVisibility(e,!1)))};n.showElements=e=>o(e).map((e=>n.setElementVisibility(e,!0)))},{}],2:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./helpers"),n)},{"./helpers":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=e("./routes"),i=e("./routes/watchpage"),r=new o.RouteParser;(()=>{const e=document.getElementsByClassName("page");for(let t of e)t.classList.contains("hidden")||t.classList.add("hidden")})(),r.onPageLoaded(o.Page.Watch,i.WatchPage),r.onPageLoaded(o.Page.Embed,i.WatchPage),r.ready()},{"./routes":5,"./routes/watchpage":7}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setNewHashLocation=void 0;n.setNewHashLocation=e=>location.hash=`#/${e}`},{}],5:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./helpers"),n),i(e("./routeparser"),n)},{"./helpers":4,"./routeparser":6}],6:[function(e,t,n){"use strict";var o;Object.defineProperty(n,"__esModule",{value:!0}),n.RouteParser=n.PageEvent=n.Page=void 0,function(e){e.Index="",e.Watch="watch",e.Embed="embed"}(n.Page||(n.Page={})),function(e){e.PageLoaded="pageLoaded",e.PageUnloaded="pageUnloaded"}(o=n.PageEvent||(n.PageEvent={}));n.RouteParser=class{constructor(){this.m_eventHandler={},this.parseHashLocation=()=>{const e=location.hash.substring(2).split("/");return{page:e[0].toLowerCase(),queryString:e.slice(1).join("/")}},this.dispatchEvents=(e,t)=>{var n;this.m_eventHandler[e]&&this.m_eventHandler[e][t]?null===(n=this.m_eventHandler[e][t])||void 0===n||n.forEach((e=>e(t,this.parseHashLocation().queryString))):console.warn(`no events to dispatch for ${e}:${t}`)},this.handleRouteEvents=()=>{window.onhashchange=()=>{const e=this.parseHashLocation();this.currentPage&&this.dispatchEvents(o.PageUnloaded,this.currentPage),this.m_currentPage=e.page,this.dispatchEvents(o.PageLoaded,this.currentPage)}},this.on=(e,t,n)=>{var o,i,r,s;null!==(o=(r=this.m_eventHandler)[e])&&void 0!==o||(r[e]={}),null!==(i=(s=this.m_eventHandler[e])[t])&&void 0!==i||(s[t]=[]),this.m_eventHandler[e][t].push(n)},this.resetPageVisibility=e=>{const t=document.getElementsByClassName("page");for(let n of t)n.id.toLowerCase()===e?n.classList.remove("hidden"):n.classList.add("hidden")},this.onPageLoaded=(e,t)=>{this.on(o.PageLoaded,e,(()=>{this.resetPageVisibility(e),t(e,this.parseHashLocation().queryString)}))},this.ready=()=>{this.handleRouteEvents(),this.dispatchEvents(o.PageLoaded,this.parseHashLocation().page)},this.m_currentPage=this.parseHashLocation().page}get currentPage(){return this.m_currentPage}}},{}],7:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.WatchPage=void 0;const i=e("../dom"),r=e("../services"),s=e("./helpers"),a=e("./routeparser");n.WatchPage=(e,t)=>o(void 0,void 0,void 0,(function*(){if(console.log("page loaded",e,t),console.log(`pageName: ${e}`),e===a.Page.Embed)return void s.setNewHashLocation(`${a.Page.Watch}/${t}`);const n=t.split("/")[0];r.getVideo(n).then((o=>{i.hideElements(["watch-error"]),i.showElements(["watch-videoArea"]);const{redditPostId:r,redditPostTitle:a,mirrorUrl:c}=o.data;if("random"===t)return void s.setNewHashLocation(`${e}/${r}`);i.setAttributes("watch-videoTitle",{content:a}),document.title=a;const d=i.setAttributes("watch-videoPlayer",{src:c}),u=document.getElementById("watch-videoArea");d&&u&&(i.hideElements([u]),d.addEventListener("loadedmetadata",(e=>{d.width=d.videoWidth,d.height=d.videoHeight,i.showElements([u])}),!1)),i.setAttributes("watch-videoDownloadLink",{href:`${c}?dl=1`}),i.setAttributes("watch-openRedditThread",{href:`https://reddit.com/${n}`}),window.onorientationchange=e=>{const t=document.getElementById("watch-videoPlayer");null!==!t&&(0===window.orientation?document.exitFullscreen():90===window.orientation&&(t.requestFullscreen(),t.play()),console.log(window.orientation))}})).catch((e=>{i.hideElements(["watch-videoArea"]),i.showElements(["watch-error"]),console.error(e);const t=document.getElementById("watch-error");t&&(t.textContent=e)}))}))},{"../dom":2,"../services":8,"./helpers":4,"./routeparser":6}],8:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./tuckbot"),n)},{"./tuckbot":9}],9:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.getVideo=void 0;n.getVideo=e=>o(void 0,void 0,void 0,(function*(){const t=yield fetch((n=`public/video/${e}`,`https://api.tuckbot.tv/${n}`),{method:"GET"});var n;if(!t.ok)throw console.error(t.status),t.statusText;return t.json()}))},{}]},{},[3]);