!function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.showElements=n.hideElements=n.setElementVisibility=n.setAttributes=void 0,n.setAttributes=function(e,t){const n=document.getElementById(e);if(n){for(const e in t){let o=t[e];void 0!==o&&"string"==typeof o||(o=n.dataset[e]||""),"content"===e?n.textContent=""+o:n.setAttribute(e,""+o)}return n}};n.setElementVisibility=(e,t)=>e.classList.toggle("hidden",!t);const o=e=>{const t=[];var n;return(n=e)instanceof Array&&(n.forEach((function(e){if("string"!=typeof e)return!1})),1)&&e.map((e=>{const n=document.getElementById(e);n&&t.push(n)})),t};n.hideElements=e=>{o(e).map((e=>n.setElementVisibility(e,!1)))};n.showElements=e=>o(e).map((e=>n.setElementVisibility(e,!0)))},{}],2:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./helpers"),n)},{"./helpers":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=e("./routes"),i=e("./routes/watchpage"),r=new o.RouteParser;(()=>{const e=document.getElementsByClassName("page");for(let t of e)t.classList.contains("hidden")||t.classList.add("hidden")})(),r.onPageLoaded(o.Page.Watch,i.WatchPage),r.onPageLoaded(o.Page.Embed,i.WatchPage),r.ready()},{"./routes":5,"./routes/watchpage":7}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setNewHashLocation=void 0;n.setNewHashLocation=e=>{location.hash=`#/${e}`,setGAPAgeUrl(`/${e}`)}},{}],5:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./helpers"),n),i(e("./routeparser"),n)},{"./helpers":4,"./routeparser":6}],6:[function(e,t,n){"use strict";var o,i;Object.defineProperty(n,"__esModule",{value:!0}),n.RouteParser=n.PageEvent=n.Page=void 0,function(e){e.Index="index",e.Contact="contact",e.Watch="watch",e.Embed="embed",e.Maintenance="maintenance"}(o=n.Page||(n.Page={})),function(e){e.PageLoaded="pageLoaded",e.PageUnloaded="pageUnloaded"}(i=n.PageEvent||(n.PageEvent={}));n.RouteParser=class{constructor(){this.m_eventHandler={},this.parseHashLocation=()=>{const e=location.hash.substring(2).split("/");return{page:e[0].toLowerCase()||o.Index,queryString:e.slice(1).join("/")}},this.togglePageVisibility=(e,t)=>{console.log(`toggling visiblity for ${e.toLowerCase()} visible: ${t}`);document.querySelectorAll(`[data-page='${e.toLowerCase()}']`).forEach((e=>e.classList.toggle("hidden",!t)))},this.dispatchEvents=(e,t)=>{var n;this.m_eventHandler[t]&&this.m_eventHandler[t][e]?null===(n=this.m_eventHandler[t][e])||void 0===n||n.forEach((e=>e(t,this.parseHashLocation().queryString))):console.warn(`no events to dispatch for ${e}:${t}`)},this.onUrlChange=e=>{const t=this.parseHashLocation();console.log(`dispatching events for ${t.page}`),!e&&this.currentPage&&this.dispatchEvents(i.PageUnloaded,this.currentPage),this.m_currentPage=t.page,this.dispatchEvents(i.PageLoaded,this.currentPage)},this.bootstrapRouteChange=()=>{window.onhashchange=()=>this.onUrlChange()},this.on=(e,t,n)=>{var o,i,r,a;const s=t.toLowerCase();null!==(o=(r=this.m_eventHandler)[s])&&void 0!==o||(r[s]={}),null!==(i=(a=this.m_eventHandler[s])[e])&&void 0!==i||(a[e]=[]),this.m_eventHandler[s][e].push(n)},this.onPageLoaded=(e,t)=>{this.on(i.PageLoaded,e,(()=>t(e,this.parseHashLocation().queryString)))},this.onPageUnloaded=(e,t)=>{this.on(i.PageUnloaded,e,(()=>t(e,this.parseHashLocation().queryString)))},this.addPageLoadVisiblityRules=()=>{for(let e in o){let t=e;console.log(`adding pageLoadVisibilityRules for ${t}`),this.onPageLoaded(t,(()=>{console.log(`OnLoad[PageVisibility] ${t}`),this.togglePageVisibility(t,!0)})),this.onPageUnloaded(t,(()=>{console.log(`OnUnload[PageVisibility] ${t}`),this.togglePageVisibility(t,!1)})),console.log(this.m_eventHandler)}},this.ready=()=>{console.log("done bootstrapping"),this.onUrlChange(!0)},this.m_currentPage=this.parseHashLocation().page,this.addPageLoadVisiblityRules(),this.bootstrapRouteChange()}get currentPage(){return this.m_currentPage}}},{}],7:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.WatchPage=void 0;const i=e("../dom"),r=e("../services"),a=e("./helpers"),s=e("./routeparser");n.WatchPage=(e,t)=>o(void 0,void 0,void 0,(function*(){if(console.log("page loaded",e,t),console.log(`pageName: ${e}`),e===s.Page.Embed)return void a.setNewHashLocation(`${s.Page.Watch}/${t}`);const n=t.split("/")[0];r.getVideo(n).then((o=>{i.hideElements(["watch-error"]),i.showElements(["watch-videoArea"]);const{redditPostId:r,redditPostTitle:s,mirrorUrl:c}=o.data;if("random"===t)return void a.setNewHashLocation(`${e}/${r}`);i.setAttributes("watch-videoTitle",{content:s}),document.title=s;const d=i.setAttributes("watch-videoPlayer",{src:c}),l=document.getElementById("watch-videoArea");d&&l&&(i.hideElements([l]),d.addEventListener("loadedmetadata",(e=>{d.width=d.videoWidth,d.height=d.videoHeight,i.showElements([l])}),!1)),i.setAttributes("watch-videoDownloadLink",{href:`${c}?dl=1`}),i.setAttributes("watch-openRedditThread",{href:`https://reddit.com/${n}`}),window.onorientationchange=e=>{const t=document.getElementById("watch-videoPlayer");null!==!t&&(0===window.orientation?document.exitFullscreen():90===window.orientation&&(t.requestFullscreen(),t.play()),console.log(window.orientation))}})).catch((e=>{i.hideElements(["watch-videoArea"]),i.showElements(["watch-error"]),console.error(e);const t=document.getElementById("watch-error");t&&(t.textContent=e)}))}))},{"../dom":2,"../services":8,"./helpers":4,"./routeparser":6}],8:[function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./tuckbot"),n)},{"./tuckbot":9}],9:[function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.getVideo=void 0;n.getVideo=e=>o(void 0,void 0,void 0,(function*(){const t=yield fetch((n=`public/video/${e}`,`https://api.tuckbot.tv/${n}`),{method:"GET"});var n;if(!t.ok)throw console.error(t.status),t.statusText;return t.json()}))},{}]},{},[3]);